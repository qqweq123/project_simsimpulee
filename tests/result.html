<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>테스트 결과 - Mellow Wave</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+KR:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .blur-content {
            filter: blur(8px);
            user-select: none;
            pointer-events: none;
        }

        .lock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.6);
            z-index: 10;
        }
    </style>
</head>

<body class="bg-[var(--bg-primary)] min-h-screen flex flex-col items-center py-8">

    <!-- Ad-Block Detection Modal -->
    <div id="adblock-modal"
        class="hidden fixed inset-0 bg-black bg-opacity-80 z-50 flex justify-center items-center p-4">
        <div class="bg-white rounded-3xl p-8 max-w-sm text-center animate-bounce-in">
            <img src="https://placehold.co/120x120/FFD166/4A4A4A?text=🥲" alt="Crying Character"
                class="mx-auto mb-4 rounded-full">
            <h3 class="font-gaegu text-2xl font-bold mb-2">광고를 차단을 해재해 주세요 🥲</h3>
            <p class="text-gray-600 mb-6 text-sm">
                Mellow Wave는 여러분의 관심으로 운영됩니다.<br>
                더 좋은 테스트를 위해 광고 차단을 꺼주세요!
            </p>
            <button onclick="location.reload()"
                class="bg-[var(--color-primary)] text-white font-bold py-2 px-6 rounded-full hover:bg-opacity-90">
                차단 해제했어요! (새로고침)
            </button>
        </div>
    </div>

    <div class="max-w-md w-full px-4 relative">
        <h1 class="font-gaegu text-3xl font-bold text-center mb-6 text-[var(--color-accent)]">나의 결과는?</h1>

        <!-- 결과 카드 (초기에는 블러 처리) -->
        <div id="result-card" class="bg-white rounded-3xl shadow-xl overflow-hidden relative">

            <!-- 잠금 화면 (Overlay) -->
            <div id="lock-overlay" class="lock-overlay">
                <div class="text-center p-6 bg-white/90 rounded-2xl shadow-2xl border border-yellow-200">
                    <span class="text-4xl mb-2 block">🔒</span>
                    <h3 class="text-xl font-bold mb-2">결과가 도착했습니다!</h3>
                    <p class="text-sm text-gray-500 mb-4">결과를 확인하려면 아래 버튼을 눌러주세요.</p>

                    <button onclick="unlockResult()"
                        class="w-full bg-[var(--color-secondary)] text-white font-bold py-3 px-6 rounded-full shadow-lg hover:brightness-110 transition-all mb-3 animate-pulse">
                        무료로 결과 확인하기 🎁
                    </button>
                    <!-- Future Payment Placeholder -->
                    <button
                        class="w-full bg-gray-200 text-gray-500 font-bold py-3 px-6 rounded-full text-sm cursor-not-allowed"
                        disabled>
                        프리미엄 정밀 분석 (준비중)
                    </button>
                </div>
            </div>

            <!-- 실제 결과 내용 (블러 처리됨) -->
            <div id="result-content" class="blur-content p-8 text-center transition-all duration-700">
                <img src="https://placehold.co/200x200/FFD166/4A4A4A?text=Strawberry+Cake"
                    class="mx-auto rounded-full mb-6 w-48 h-48 object-cover">
                <h2 class="text-2xl font-bold text-[var(--text-dark)] mb-2">상큼발랄 딸기 케이크</h2>
                <div class="flex justify-center gap-2 mb-6">
                    <span class="px-3 py-1 bg-red-100 text-red-600 rounded-full text-xs font-bold">#분위기메이커</span>
                    <span class="px-3 py-1 bg-pink-100 text-pink-600 rounded-full text-xs font-bold">#감성충만</span>
                </div>
                <p class="text-gray-600 text-sm leading-7 mb-8 text-left bg-gray-50 p-4 rounded-xl">
                    당신은 어디서나 주목받는 상큼한 매력의 소유자입니다! 분위기를 밝게 만드는 능력이 탁월하며,
                    주변 사람들에게 긍정적인 에너지를 전파합니다. 다만 가끔은 혼자만의 시간이 필요할 때도 있어요.
                </p>

                <!-- 상용화: 공유 & 친구 찾기 -->
                <div class="border-t border-gray-100 pt-6">
                    <h4 class="font-bold mb-4 text-sm">결과 공유하고 내 짝꿍 찾기</h4>
                    <div class="flex justify-center gap-4">
                        <button class="p-3 bg-yellow-300 rounded-full hover:scale-110 transition">🟡 카카오</button>
                        <button class="p-3 bg-blue-500 text-white rounded-full hover:scale-110 transition">🔵
                            페이스북</button>
                        <button class="p-3 bg-gray-200 rounded-full hover:scale-110 transition">🔗 링크</button>
                    </div>
                </div>

                <!-- 광고 슬롯 -->
                <div class="mt-8 h-20 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400 text-xs">
                    Advertisement Area
                </div>
            </div>
        </div>

        <!-- 하단 버튼 -->
        <div class="mt-8 text-center">
            <a href="../home.html"
                class="inline-block text-gray-500 underline text-sm hover:text-[var(--color-primary)]">
                다른 테스트 하러 가기
            </a>
        </div>
    </div>

    <!-- Script Include -->
    <script>
        // Ad-Block Detection Simulation
        // 실제로는 google adsense 스크립트가 로드되었는지 확인하거나, 특정 클래스의 높이를 체크함.
        // 여기서는 간단한 시뮬레이션으로 데모 구현.

        window.onload = function () {
            // 가상의 AdBlock 감지 (50% 확률로 테스트하거나, 실제 구현 시에는 ads.js 파일 로드 여부 체크)
            const isAdBlocked = false; // 테스트를 위해 false로 둠. true로 바꾸면 모달 뜸.

            if (isAdBlocked) {
                document.getElementById('adblock-modal').classList.remove('hidden');
                document.getElementById('adblock-modal').classList.add('flex');
            }
        };

        // Result Unlock Logic
        function unlockResult() {
            // 1. Open Coupang or Ad Link in new tab
            window.open('https://www.coupang.com', '_blank');

            // 2. Remove Blur and Overlay in current tab
            const overlay = document.getElementById('lock-overlay');
            const content = document.getElementById('result-content');

            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
                content.classList.remove('blur-content');
            }, 500);
        }
    </script>
</body>

</html>