<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í…ŒìŠ¤íŠ¸ ê²°ê³¼ - Mellow Wave</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+KR:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/src/assets/styles/main.css">
</head>
<style>
    .blur-content {
        filter: blur(8px);
        user-select: none;
        pointer-events: none;
    }

    .lock-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: rgba(255, 255, 255, 0.6);
        z-index: 10;
    }

    .result-card {
        background-size: cover;
        background-position: center;
    }

    .result-Egen-pink {
        background: linear-gradient(135deg, #fff0f5 0%, #ffe4e1 100%);
    }

    .result-Teto-yellow {
        background: linear-gradient(135deg, #fffacd 0%, #fff8dc 100%);
    }

    .result-Egen-purple {
        background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
    }

    .result-Teto-red {
        background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
    }
</style>
</head>

<body class="bg-[var(--bg-primary)] min-h-screen flex flex-col items-center py-8">

    <div class="max-w-md w-full px-4 relative z-0">
        <h1 class="font-gaegu text-3xl font-bold text-center mb-6 text-gray-700">ë‹¹ì‹ ì˜ í˜¸ë¥´ëª¬ ë¶„ì„ ê²°ê³¼</h1>

        <!-- ê²°ê³¼ ì¹´ë“œ -->
        <div id="result-card"
            class="bg-white rounded-3xl shadow-xl overflow-hidden relative fade-in border border-white/50">

            <!-- ì ê¸ˆ í™”ë©´ (Overlay) -->
            <div id="lock-overlay" class="lock-overlay">
                <div class="text-center p-6 bg-white/90 rounded-2xl shadow-2xl border border-blue-100 backdrop-blur-sm">
                    <span class="text-5xl mb-4 block animate-bounce">ğŸ”</span>
                    <h3 class="text-xl font-bold mb-2">ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
                    <p class="text-sm text-gray-500 mb-6">ì •ë°€ ë¶„ì„ ê²°ê³¼ë¥¼ ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”.</p>

                    <button onclick="unlockResult()"
                        class="btn-press w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:brightness-110 transition-all mb-3 flex items-center justify-center gap-2">
                        <span>ê²°ê³¼ ë¬´ë£Œë¡œ í™•ì¸í•˜ê¸°</span>
                        <span class="text-lg">ğŸ</span>
                    </button>
                    <p class="text-[10px] text-gray-400">ê´‘ê³  ì‹œì²­ í›„ ê²°ê³¼ê°€ ê³µê°œë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- ì‹¤ì œ ê²°ê³¼ ë‚´ìš© (ë¸”ëŸ¬ ì²˜ë¦¬ë¨) -->
            <div id="result-content" class="blur-content p-6 text-center transition-all duration-700">

                <div class="mb-4">
                    <span id="result-emoji" class="text-6xl drop-shadow-md"></span>
                </div>

                <h2 id="result-title" class="text-2xl font-bold text-gray-800 mb-1 break-keep"></h2>
                <h3 id="result-subtitle" class="text-sm font-medium text-gray-500 mb-6"></h3>

                <!-- í¼ì„¼íŠ¸ ê²Œì´ì§€ -->
                <div class="bg-white/60 rounded-xl p-4 mb-6 shadow-sm border border-white/40">
                    <div class="flex justify-between text-xs font-bold mb-2 text-gray-600">
                        <span>Egen (ê°ì„±)</span>
                        <span id="percent-text">50%</span>
                        <span>Teto (ì´ì„±)</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                        <div id="percent-bar"
                            class="h-full bg-gradient-to-r from-pink-400 to-blue-500 transition-all duration-1000"
                            style="width: 50%"></div>
                    </div>
                </div>

                <!-- ì´ë¯¸ì§€ ì˜ì—­ (Placeholder) -->
                <div
                    class="rounded-xl overflow-hidden mb-6 shadow-md aspect-square bg-gray-100 flex items-center justify-center relative">
                    <!-- ì‹¤ì œ ì´ë¯¸ì§€ ìƒì„± ì‹œ src êµì²´ -->
                    <img id="result-image" src="" alt="Result Illustration" class="w-full h-full object-cover hidden"
                        onerror="this.style.display='none'">
                    <div id="image-placeholder" class="text-gray-400 text-sm">
                        Loading Image...
                    </div>
                </div>

                <div class="flex flex-wrap justify-center gap-2 mb-6" id="result-tags">
                    <!-- íƒœê·¸ë“¤ì´ ë™ì ìœ¼ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                </div>

                <div class="bg-white/70 p-6 rounded-2xl shadow-inner text-left mb-8">
                    <p id="result-desc" class="text-gray-700 text-sm leading-7 whitespace-pre-line"></p>
                </div>

                <!-- ê¶í•© ì •ë³´ -->
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="bg-blue-50 p-3 rounded-xl border border-blue-100">
                        <span class="text-xs text-blue-400 font-bold block mb-1">BEST PARTNER</span>
                        <span id="match-best" class="text-sm font-bold text-gray-700"></span>
                    </div>
                    <div class="bg-red-50 p-3 rounded-xl border border-red-100">
                        <span class="text-xs text-red-400 font-bold block mb-1">WORST PARTNER</span>
                        <span id="match-worst" class="text-sm font-bold text-gray-700"></span>
                    </div>
                </div>

                <!-- ê³µìœ  ë²„íŠ¼ -->
                <div class="border-t border-gray-200/50 pt-6">
                    <h4 class="font-bold mb-4 text-xs text-gray-400 tracking-wider">SHARE RESULT</h4>
                    <div class="flex justify-center gap-4">
                        <button
                            class="p-3 bg-[#FEE500] rounded-full hover:scale-110 transition shadow-sm btn-press flex items-center justify-center w-12 h-12">
                            <span class="text-current text-xl">K</span>
                        </button>
                        <button
                            class="p-3 bg-[#1877F2] text-white rounded-full hover:scale-110 transition shadow-sm btn-press flex items-center justify-center w-12 h-12">
                            <span class="text-current text-xl">f</span>
                        </button>
                        <button onclick="copyLink()"
                            class="p-3 bg-gray-100 rounded-full hover:scale-110 transition shadow-sm btn-press flex items-center justify-center w-12 h-12">
                            <span class="text-gray-600 text-xl">ğŸ”—</span>
                        </button>
                    </div>
                </div>

                <!-- ê´‘ê³  ìŠ¬ë¡¯ -->
                <div
                    class="mt-8 h-20 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400 text-xs border border-dashed border-gray-300">
                    Advertisement Area
                </div>
            </div>
        </div>

        <!-- í•˜ë‹¨ ë²„íŠ¼ -->
        <div class="mt-8 text-center space-y-4">
            <a href="/index.html"
                class="block w-full bg-white border border-pink-300 text-pink-500 font-bold py-3 rounded-xl hover:bg-pink-50 transition">
                Mellow Wave í™ˆìœ¼ë¡œ
            </a>
        </div>
    </div>

    <script type="module">
        import { hormoniResults } from './hormoni_data.js';

        document.addEventListener('DOMContentLoaded', () => {
            const colorClass = `result-${type}-${resultData.color}`; // ì˜ˆ: result-Egen-pink
            card.classList.add(colorClass);

            // íƒœê·¸ ë Œë”ë§
            const tagContainer = document.getElementById('result-tags');
            tagContainer.innerHTML = '';
            if (resultData.tags) {
                resultData.tags.forEach(tag => {
                    const span = document.createElement('span');
                    span.className = "px-3 py-1 bg-white/60 backdrop-blur-sm text-gray-700 rounded-full text-xs font-bold border border-white/20 shadow-sm";
                    span.innerText = tag;
                    tagContainer.appendChild(span);
                });
            }

            // ê¶í•© ì •ë³´ (ì´ë¦„ ë§¤í•‘ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ - ì¼ë‹¨ ì½”ë“œë¡œ í‘œì‹œ)
            // TODO: ê¶í•© ì½”ë“œ(Egen_M ë“±)ë¥¼ ì‚¬ëŒì´ ì½ê¸° ì¢‹ì€ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
            document.getElementById('match-best').innerText = resultData.match.best.replace('_', ' ');
            document.getElementById('match-worst').innerText = resultData.match.worst.replace('_', ' ');

            // ì´ë¯¸ì§€ ì²˜ë¦¬
            // í˜„ì¬ ì´ë¯¸ì§€ ìƒì„± ê¸°ëŠ¥ì´ skipped ìƒíƒœì´ë¯€ë¡œ placeholder ë¡œì§ ìœ ì§€
            // ë§Œì•½ ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´:
            // document.getElementById('result-image').src = `../images/${resultData.image}`;
            // document.getElementById('result-image').classList.remove('hidden');
            // document.getElementById('image-placeholder').classList.add('hidden');
        }

            // 3. Ad-Block & Lock Logic
            checkAdLockStatus();
        });

        window.unlockResult = function () {
            // ì‹¤ì œ ê´‘ê³  ì—°ê²° (ì˜ˆ: ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë“±)
            window.open('https://www.coupang.com', '_blank');
            localStorage.setItem('adUnlockTime', Date.now());

            animateUnlock();
        }

        function animateUnlock() {
            const overlay = document.getElementById('lock-overlay');
            const content = document.getElementById('result-content');

            overlay.style.transition = 'opacity 0.5s ease';
            overlay.style.opacity = '0';

            setTimeout(() => {
                overlay.style.display = 'none';
                content.classList.remove('blur-content');
            }, 500);
        }

        function checkAdLockStatus() {
            const unlockTime = localStorage.getItem('adUnlockTime');
            if (unlockTime) {
                const now = Date.now();
                // 1ì‹œê°„ ìœ íš¨
                if (now - parseInt(unlockTime) < 60 * 60 * 1000) {
                    document.getElementById('lock-overlay').style.display = 'none';
                    document.getElementById('result-content').classList.remove('blur-content');
                }
            }
        }

        window.copyLink = function () {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('ê²°ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì¹œêµ¬ë“¤ì—ê²Œ ê³µìœ í•´ë³´ì„¸ìš”.');
            });
        }
    </script>
</body>

</html>